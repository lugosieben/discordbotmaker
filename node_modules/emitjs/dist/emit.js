function Emitter(){this.subscribers={},this.on=this.subscribe=this.register=this.addListener=this.on.bind(this),this.off=this.unsubscribe=this.unregister=this.removeListener=this.removeAllListeners=this.off.bind(this),this.emit=this.dispatch=this.emit.bind(this),this.one=this.once=this.one.bind(this)}var DEFAULT_EVENT="__DefaultEvent__";Emitter.prototype.on=function(i){if("function"==typeof i){var t=Array.prototype.slice.call(arguments);return t.unshift(DEFAULT_EVENT),this.on.apply(this,t)}var s=Array.prototype.slice.call(arguments,1);if(i in this.subscribers){var r=this.subscribers[i];r.push.apply(r,s)}else this.subscribers[i]=s;return function(){this.off(i,s)}.bind(this)},Emitter.prototype.one=function(i){if("function"==typeof i){var t=Array.prototype.slice.call(arguments);return t.unshift(DEFAULT_EVENT),this.one.apply(this,t)}var s=this,r=Array.prototype.slice.call(arguments,1).map(function(i){var t=function(){i.apply(null,arguments),s.off(this)}.bind(t);return t});if(i in this.subscribers){var e=this.subscribers[i];e.push.apply(e,r)}else this.subscribers[i]=r;return function(){this.off(i,r)}.bind(this)},Emitter.prototype.off=function(i){var t=Array.prototype.slice.call(arguments);if(this.subscribers[DEFAULT_EVENT])i=DEFAULT_EVENT;else{if("undefined"==typeof i)return void(this.subscribers={});t=t.slice(1)}var s=this.subscribers[i];s&&(t.length?(t.forEach(function(i){var t=s.indexOf(i);0>t||s.splice(t,1)}),s.length||delete this.subscribers[i]):delete this.subscribers[i])},Emitter.prototype.emit=function(i){if(this.subscribers[DEFAULT_EVENT]){var t=Array.prototype.slice.call(arguments);return this.subscribers[DEFAULT_EVENT].forEach(function(i){i.apply(null,t)})}var t=Array.prototype.slice.call(arguments,1),s=this.subscribers[i];s&&s.forEach(function(i){i.apply(null,t)})},module.exports=Emitter;